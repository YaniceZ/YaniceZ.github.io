<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salmon Stream Network Analysis</title>
    <link rel="stylesheet" href="../css/styles.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 添加图片处理相关的CSS -->
    <style>
        .project-image-gallery {
            margin-bottom: 2rem;
        }
        
        .featured-image {
            width: 100%;
            max-height: 500px;
            object-fit: cover;
            margin-bottom: 1rem;
            border-radius: 5px;
        }
        
        .image-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        
        .image-grid img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 5px;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .image-grid {
                grid-template-columns: 1fr;
            }
            
            .image-grid img {
                height: 200px;
            }
            
            .featured-image {
                max-height: 300px;
            }
        }
        
        /* 图片加载动画 */
        .img-loading {
            position: relative;
        }
        
        .img-loading::before {
            content: "Loading...";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #666;
        }
    </style>
</head>
<body>
    <!-- Header/Navigation -->
    <header>
        <div class="container">
            <nav>
                <a href="../index.html" class="logo">Yanice Zeng</a>
                <ul class="nav-links">
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../index.html#projects">Projects</a></li>
                    <li><a href="../index.html#skills">Skills</a></li>
                    <li><a href="../index.html#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Project Detail Section -->
    <section class="project-detail">
        <div class="container">
            <div class="back-button">
                <a href="../index.html#projects"><i class="fas fa-arrow-left"></i> Back to Projects</a>
            </div>
            
            <h1>Salmon Stream Network Analysis</h1>
            
            <div class="project-metadata">
                <span class="project-date">2023</span>
                <div class="project-tags">
                    <span class="tag">Spatial Analysis</span>
                    <span class="tag">Stream Modeling</span>
                    <span class="tag">Habitat Connectivity</span>
                    <span class="tag">ArcGIS Pro</span>
                    <span class="tag">GIS</span>
                </div>
            </div>
            
            <div class="project-content-wrapper">
                <div class="project-image-gallery">
                    <!-- 添加 onload 和 onerror 处理来解决图片加载问题 -->
                    <div class="img-loading">
                        <img src="../images/project_image/layout_GEM511/lab2_Salmon_Stream_Network_analysis.jpg" 
                             alt="Salmon Stream Network Map" 
                             class="featured-image" 
                             onload="this.parentNode.classList.remove('img-loading')" 
                             onerror="this.src='../images/placeholder.jpg'; this.parentNode.classList.remove('img-loading')">
                    </div>
                    <div class="image-grid">
                        <div class="img-loading">
                            <img src="../images/project_image/layout_GEM511/lab2_Stream_network_across_Vancouver_Island.jpg" 
                                 alt="Stream network across Vancouver Island" 
                                 onload="this.parentNode.classList.remove('img-loading')" 
                                 onerror="this.src='../images/placeholder.jpg'; this.parentNode.classList.remove('img-loading')">
                        </div>
                        <div class="img-loading">
                            <img src="../images/project_image/layout_GEM511/lab2_Stream_networks_analysis_on_small_scale_and_large_scale.jpg" 
                                 alt="Analysis on small scale and large scale" 
                                 onload="this.parentNode.classList.remove('img-loading')" 
                                 onerror="this.src='../images/placeholder.jpg'; this.parentNode.classList.remove('img-loading')">
                        </div>
                    </div>
                </div>
                
                <div class="project-description">
                    <h2>Objective</h2>
                    <p>Model salmon habitat connectivity using GIS and Digital Elevation Models (DEMs) to identify barriers and support conservation planning strategies.</p>
                    
                    <h2>Methods</h2>
                    <ul>
                        <li>Derived stream networks from high-resolution DEMs in ArcGIS Pro</li>
                        <li>Identified barriers to fish passage (dams, culverts, natural obstacles)</li>
                        <li>Analyzed stream flow accumulation and watershed characteristics</li>
                        <li>Evaluated stream order dynamics using terrain analysis</li>
                        <li>Proposed methodology improvements including:
                            <ul>
                                <li>Higher-resolution DEMs for better stream delineation</li>
                                <li>Lake masking for improved hydrological modeling</li>
                                <li>Integration of field validation data</li>
                            </ul>
                        </li>
                    </ul>
                    
                    <h2>Outcomes</h2>
                    <ul>
                        <li>Successfully mapped the stream network across the study area</li>
                        <li>Highlighted critical connectivity issues affecting salmon migration</li>
                        <li>Recommended specific dam removal and culvert replacement locations</li>
                        <li>Created comprehensive terrain analysis showing stream order dynamics</li>
                        <li>Developed priority conservation zones based on habitat quality</li>
                    </ul>
                    
                    <h2>Technical Highlights</h2>
                    <div class="code-snippet">
                        <pre><code class="language-python">
# Example of ArcPy code for stream network derivation
import arcpy
from arcpy.sa import *

# Set workspace and enable Spatial Analyst extension
arcpy.env.workspace = "C:/GIS_Projects/Salmon_Analysis"
arcpy.CheckOutExtension("Spatial")

# Fill sinks in the DEM
dem = "watershed_dem.tif"
filled_dem = Fill(dem)
filled_dem.save("filled_dem.tif")

# Calculate flow direction
flow_dir = FlowDirection(filled_dem)
flow_dir.save("flow_direction.tif")

# Calculate flow accumulation
flow_acc = FlowAccumulation(flow_dir)
flow_acc.save("flow_accumulation.tif")

# Extract streams (cells with accumulation > threshold)
threshold = 1000  # Adjust based on watershed characteristics
streams = Con(flow_acc > threshold, 1)
streams.save("stream_network.tif")

# Convert raster streams to vector features
arcpy.sa.StreamToFeature(streams, flow_dir, "stream_network.shp", "SIMPLIFY")
                        </code></pre>
                    </div>
                    
                    <h2>Key Findings</h2>
                    <p>This analysis revealed several important insights for salmon habitat conservation:</p>
                    <ul>
                        <li>Identified three major migration barriers requiring immediate attention</li>
                        <li>Mapped critical spawning habitats in headwater streams</li>
                        <li>Quantified the impact of watershed degradation on habitat connectivity</li>
                        <li>Demonstrated the effectiveness of GIS-based stream network analysis for conservation planning</li>
                    </ul>
                    
                    <h2>Significance</h2>
                    <p>The project provides valuable information for salmon conservation efforts, integrating hydrological modeling with habitat assessment. The methodology can be applied to other watersheds to prioritize restoration efforts and improve habitat connectivity. The findings directly support local conservation initiatives and have been incorporated into regional salmon recovery plans.</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Related Projects Section -->
    <section class="related-projects">
        <div class="container">
            <h2>Related Projects</h2>
            <div class="related-grid">
                <a href="cable_bay_project.html" class="related-card">
                    <h3>Tracking Coastal Ecosystem Shifts</h3>
                    <p>Monitoring land cover changes in Cable Bay, BC.</p>
                </a>
                <a href="project-grizzly.html" class="related-card">
                    <h3>Grizzly Bear Movement in Alberta</h3>
                    <p>Least cost path analysis for wildlife corridors.</p>
                </a>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2025 Yanice Zeng. All rights reserved.</p>
                <div class="social-links">
                    <a href="https://github.com/yanicez" target="_blank"><i class="fab fa-github"></i></a>
                    <a href="mailto:yanicezeng28@gmail.com"><i class="fas fa-envelope"></i></a>
                    <a href="https://www.linkedin.com/in/yanice-zeng" target="_blank"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- JavaScript -->
    <script src="../js/script.js"></script>
    <!-- Prism.js for code highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-python.min.js"></script>
    
    <!-- 添加图片加载处理脚本 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 创建一个占位图片如果没有
            function createPlaceholder() {
                // 检查是否已存在占位图片
                if (!document.querySelector('img[src="../images/placeholder.jpg"]')) {
                    const placeholderImg = new Image();
                    placeholderImg.src = "../images/placeholder.jpg";
                    placeholderImg.style.display = "none";
                    document.body.appendChild(placeholderImg);
                }
            }
            
            // 修复图片路径问题
            function fixImagePaths() {
                const images = document.querySelectorAll('.project-image-gallery img');
                images.forEach(img => {
                    // 替换空格为下划线
                    if (img.src.includes(' ')) {
                        let newSrc = img.src.replace(/ /g, '_');
                        img.src = newSrc;
                    }
                    
                    // 检查图片是否存在
                    const testImg = new Image();
                    testImg.onload = function() {
                        img.parentNode.classList.remove('img-loading');
                    };
                    testImg.onerror = function() {
                        // 尝试不同的路径格式
                        const paths = [
                            img.src,
                            img.src.replace('images/project_image/', 'images/'),
                            '../' + img.src.split('../').pop().replace('images/project_image/', 'images/'),
                            img.src.replace('/layout_GEM511/', '/')
                        ];
                        
                        let loaded = false;
                        paths.forEach(path => {
                            if (!loaded) {
                                const altImg = new Image();
                                altImg.onload = function() {
                                    img.src = path;
                                    img.parentNode.classList.remove('img-loading');
                                    loaded = true;
                                };
                                altImg.src = path;
                            }
                        });
                        
                        // 如果所有路径都失败，使用占位图片
                        setTimeout(() => {
                            if (!loaded) {
                                img.src = '../images/placeholder.jpg';
                                img.parentNode.classList.remove('img-loading');
                            }
                        }, 2000);
                    };
                    testImg.src = img.src;
                });
            }
            
            createPlaceholder();
            fixImagePaths();
        });
    </script>
</body>
</html>
